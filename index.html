<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marcador Torneo de Ping Pong</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            /* --- IMAGEN DE FONDO --- */
            /* Reemplaza la URL de abajo con la ruta de tu imagen en GitHub */
            background-image: linear-gradient(rgba(15, 41, 59, 0.85), rgba(13, 79, 78, 0.85)), url('https://github.com/Jjordaz22964692/Ping-Pong/blob/4d2f58c26b80c8830316f91df20655e3e5e3283f/imagenes/photo-1511067007398-7e4b90cfa4bc.avif');
            background-color: #0f293b; /* Color de respaldo si la imagen no carga */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #F9FAFB;
        }
        h1, h3 {
            font-family: 'Orbitron', sans-serif;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
        }
        .bracket {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 2rem;
            overflow-x: auto;
        }
        .round {
            display: flex;
            flex-direction: column;
            justify-content: center;
            flex-grow: 1;
            min-width: 320px;
            gap: 50px;
        }
        .match {
            background-color: rgba(31, 41, 55, 0.8);
            border-radius: 0.75rem;
            margin: 10px;
            padding: 1.25rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
            position: relative;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 2px solid transparent;
            backdrop-filter: blur(10px);
            cursor: pointer;
        }
        .match-completed {
            border-color: #4b5563;
        }
        .match.is-focus-mode {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1.25);
            z-index: 100;
            border-color: #f59e0b;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            cursor: default;
            width: 90%;
            max-width: 400px;
        }
        .player {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid #4b5563;
        }
        .player:last-child {
            border-bottom: none;
        }
        .player-name {
            font-weight: 500;
            flex-grow: 1;
            font-size: 1.1rem;
        }
        .winner-highlight {
            animation: glow 1.5s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #00ffc3, 0 0 20px #00ffc3; }
            to { text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #00ffc3, 0 0 40px #00ffc3; }
        }
        .player-score {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.75rem;
            font-weight: 700;
            margin-left: 1rem;
            width: 40px;
            text-align: center;
            color: #f59e0b;
        }
        .score-controls button {
            background-color: #4b5563;
            border: none;
            color: white;
            border-radius: 9999px;
            width: 32px;
            height: 32px;
            font-size: 1.2rem;
            line-height: 1;
            margin-left: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .score-controls button:hover {
            background-color: #6b7280;
            transform: scale(1.1);
        }
        .winner-button {
            background: linear-gradient(to right, #10b981, #14b8a6);
            color: white;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            margin-top: 1rem;
            cursor: pointer;
            width: 100%;
            font-weight: 700;
            font-size: 1rem;
            text-transform: uppercase;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        .winner-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 10px rgba(0,0,0,0.2);
        }
        .winner-button:disabled {
            background: #4b5563;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2.5rem;
            margin-bottom: 1rem;
        }
        .logo-container img {
            max-height: 70px;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));
        }
        .vs {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            color: #d1d5db;
            text-shadow: 3px 3px 5px rgba(0,0,0,0.5);
        }
        #backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 50;
            opacity: 0;
            transition: opacity 0.4s ease;
            pointer-events: none;
        }
        #backdrop.active {
            opacity: 1;
            pointer-events: auto;
        }
        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 200;
            pointer-events: none;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <canvas id="fireworks-canvas"></canvas>
    <div id="backdrop"></div>

    <header class="text-center mb-12">
        <div class="logo-container">
             <!-- --- LOGO 1 --- -->
             <img src="URL_DEL_LOGO_ANDROMEDA_AQUI.png" alt="Andromeda Ventures Logo" onerror="this.onerror=null;this.src='https://placehold.co/200x70/0f293b/FFFFFF?text=Andromeda';">
             <span class="vs">VS</span>
             <!-- --- LOGO 2 --- -->
             <img src="URL_DEL_LOGO_NESTLE_AQUI.png" alt="Nestlé Logo" onerror="this.onerror=null;this.src='https://placehold.co/200x70/0f293b/FFFFFF?text=Nestlé';">
        </div>
        <h1 class="text-5xl sm:text-6xl font-black tracking-wider uppercase">Torneo de Ping Pong</h1>
    </header>

    <div class="bracket">
        <!-- Ronda 1 (Izquierda) -->
        <div class="round" id="round-1-left">
            <div class="match" data-match-id="1" data-next-match="9" data-next-player-slot="1" onclick="focusMatch(event)"><div class="player" data-player-id="1"><span class="player-name">Alejandra Galindez - Ricardo Pacheco</span><div class="score-controls"><button onclick="changeScore(1, 1, -1)">-</button><span class="player-score" id="score-1-1">0</span><button onclick="changeScore(1, 1, 1)">+</button></div></div><div class="player" data-player-id="2"><span class="player-name">Justin Jiménez - Kender Padrón</span><div class="score-controls"><button onclick="changeScore(1, 2, -1)">-</button><span class="player-score" id="score-1-2">0</span><button onclick="changeScore(1, 2, 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(1, event)" disabled>Declarar Ganador</button></div>
            <div class="match" data-match-id="2" data-next-match="9" data-next-player-slot="2" onclick="focusMatch(event)"><div class="player" data-player-id="3"><span class="player-name">Cecilia Badill - Valeria Ortiz</span><div class="score-controls"><button onclick="changeScore(2, 3, -1)">-</button><span class="player-score" id="score-2-3">0</span><button onclick="changeScore(2, 3, 1)">+</button></div></div><div class="player" data-player-id="4"><span class="player-name">Feliciano González - Pedro Colmenares</span><div class="score-controls"><button onclick="changeScore(2, 4, -1)">-</button><span class="player-score" id="score-2-4">0</span><button onclick="changeScore(2, 4, 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(2, event)" disabled>Declarar Ganador</button></div>
            <div class="match" data-match-id="3" data-next-match="10" data-next-player-slot="1" onclick="focusMatch(event)"><div class="player" data-player-id="5"><span class="player-name">Gisanny Marcano - Mariam Martínez</span><div class="score-controls"><button onclick="changeScore(3, 5, -1)">-</button><span class="player-score" id="score-3-5">0</span><button onclick="changeScore(3, 5, 1)">+</button></div></div><div class="player" data-player-id="6"><span class="player-name">Vanesa Cruz - Iván León</span><div class="score-controls"><button onclick="changeScore(3, 6, -1)">-</button><span class="player-score" id="score-3-6">0</span><button onclick="changeScore(3, 6, 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(3, event)" disabled>Declarar Ganador</button></div>
            <div class="match" data-match-id="4" data-next-match="10" data-next-player-slot="2" onclick="focusMatch(event)"><div class="player" data-player-id="7"><span class="player-name">Andrés Di Bari - Vicente Oropeza</span><div class="score-controls"><button onclick="changeScore(4, 7, -1)">-</button><span class="player-score" id="score-4-7">0</span><button onclick="changeScore(4, 7, 1)">+</button></div></div><div class="player" data-player-id="8"><span class="player-name">Lui Hern Chang - Jesús González</span><div class="score-controls"><button onclick="changeScore(4, 8, -1)">-</button><span class="player-score" id="score-4-8">0</span><button onclick="changeScore(4, 8, 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(4, event)" disabled>Declarar Ganador</button></div>
        </div>
        <div class="round" id="round-2-left"><div class="match" data-match-id="9" data-next-match="13" data-next-player-slot="1" onclick="focusMatch(event)"><div class="player" data-player-id="9-1"><span class="player-name">Ganador Partido 1</span><div class="score-controls"><button onclick="changeScore(9, '9-1', -1)">-</button><span class="player-score" id="score-9-9-1">0</span><button onclick="changeScore(9, '9-1', 1)">+</button></div></div><div class="player" data-player-id="9-2"><span class="player-name">Ganador Partido 2</span><div class="score-controls"><button onclick="changeScore(9, '9-2', -1)">-</button><span class="player-score" id="score-9-9-2">0</span><button onclick="changeScore(9, '9-2', 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(9, event)" disabled>Declarar Ganador</button></div><div class="match" data-match-id="10" data-next-match="13" data-next-player-slot="2" onclick="focusMatch(event)"><div class="player" data-player-id="10-1"><span class="player-name">Ganador Partido 3</span><div class="score-controls"><button onclick="changeScore(10, '10-1', -1)">-</button><span class="player-score" id="score-10-10-1">0</span><button onclick="changeScore(10, '10-1', 1)">+</button></div></div><div class="player" data-player-id="10-2"><span class="player-name">Ganador Partido 4</span><div class="score-controls"><button onclick="changeScore(10, '10-2', -1)">-</button><span class="player-score" id="score-10-10-2">0</span><button onclick="changeScore(10, '10-2', 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(10, event)" disabled>Declarar Ganador</button></div></div>
        <div class="round" id="round-final"><div class="match" data-match-id="15" onclick="focusMatch(event)"><h3 class="text-2xl font-bold text-center mb-4 text-yellow-400 uppercase">Gran Final</h3><div class="player" data-player-id="15-1"><span class="player-name">Ganador Semifinal 1</span><div class="score-controls"><button onclick="changeScore(15, '15-1', -1)">-</button><span class="player-score" id="score-15-15-1">0</span><button onclick="changeScore(15, '15-1', 1)">+</button></div></div><div class="player" data-player-id="15-2"><span class="player-name">Ganador Semifinal 2</span><div class="score-controls"><button onclick="changeScore(15, '15-2', -1)">-</button><span class="player-score" id="score-15-15-2">0</span><button onclick="changeScore(15, '15-2', 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(15, event)" disabled>Declarar Campeón</button></div><div class="match third-place" data-match-id="16" onclick="focusMatch(event)"><h3 class="text-xl font-bold text-center mb-2 text-orange-400 uppercase">Tercer Lugar</h3><div class="player" data-player-id="16-1"><span class="player-name">Perdedor Semifinal 1</span><div class="score-controls"><button onclick="changeScore(16, '16-1', -1)">-</button><span class="player-score" id="score-16-16-1">0</span><button onclick="changeScore(16, '16-1', 1)">+</button></div></div><div class="player" data-player-id="16-2"><span class="player-name">Perdedor Semifinal 2</span><div class="score-controls"><button onclick="changeScore(16, '16-2', -1)">-</button><span class="player-score" id="score-16-16-2">0</span><button onclick="changeScore(16, '16-2', 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(16, event)" disabled>Declarar 3er Lugar</button></div></div>
        <div class="round" id="round-2-right"><div class="match" data-match-id="11" data-next-match="14" data-next-player-slot="1" onclick="focusMatch(event)"><div class="player" data-player-id="11-1"><span class="player-name">Ganador Partido 5</span><div class="score-controls"><button onclick="changeScore(11, '11-1', -1)">-</button><span class="player-score" id="score-11-11-1">0</span><button onclick="changeScore(11, '11-1', 1)">+</button></div></div><div class="player" data-player-id="11-2"><span class="player-name">Ganador Partido 6</span><div class="score-controls"><button onclick="changeScore(11, '11-2', -1)">-</button><span class="player-score" id="score-11-11-2">0</span><button onclick="changeScore(11, '11-2', 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(11, event)" disabled>Declarar Ganador</button></div><div class="match" data-match-id="12" data-next-match="14" data-next-player-slot="2" onclick="focusMatch(event)"><div class="player" data-player-id="12-1"><span class="player-name">Ganador Partido 7</span><div class="score-controls"><button onclick="changeScore(12, '12-1', -1)">-</button><span class="player-score" id="score-12-12-1">0</span><button onclick="changeScore(12, '12-1', 1)">+</button></div></div><div class="player" data-player-id="12-2"><span class="player-name">Ganador Partido 8</span><div class="score-controls"><button onclick="changeScore(12, '12-2', -1)">-</button><span class="player-score" id="score-12-12-2">0</span><button onclick="changeScore(12, '12-2', 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(12, event)" disabled>Declarar Ganador</button></div></div>
        <div class="round" id="round-1-right"><div class="match" data-match-id="5" data-next-match="11" data-next-player-slot="1" onclick="focusMatch(event)"><div class="player" data-player-id="9"><span class="player-name">Angel Benavente - Samuel Da Silva</span><div class="score-controls"><button onclick="changeScore(5, 9, -1)">-</button><span class="player-score" id="score-5-9">0</span><button onclick="changeScore(5, 9, 1)">+</button></div></div><div class="player" data-player-id="10"><span class="player-name">Alexis Rodriguez - Arturo Bennateran</span><div class="score-controls"><button onclick="changeScore(5, 10, -1)">-</button><span class="player-score" id="score-5-10">0</span><button onclick="changeScore(5, 10, 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(5, event)" disabled>Declarar Ganador</button></div><div class="match" data-match-id="6" data-next-match="11" data-next-player-slot="2" onclick="focusMatch(event)"><div class="player" data-player-id="11"><span class="player-name">Verónica Serrano - Enrique Jeppesen</span><div class="score-controls"><button onclick="changeScore(6, 11, -1)">-</button><span class="player-score" id="score-6-11">0</span><button onclick="changeScore(6, 11, 1)">+</button></div></div><div class="player" data-player-id="12"><span class="player-name">Ruben Luna - Ricardo Fernandes</span><div class="score-controls"><button onclick="changeScore(6, 12, -1)">-</button><span class="player-score" id="score-6-12">0</span><button onclick="changeScore(6, 12, 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(6, event)" disabled>Declarar Ganador</button></div><div class="match" data-match-id="7" data-next-match="12" data-next-player-slot="1" onclick="focusMatch(event)"><div class="player" data-player-id="13"><span class="player-name">Katiuska Rojas y Miguel Parra</span><div class="score-controls"><button onclick="changeScore(7, 13, -1)">-</button><span class="player-score" id="score-7-13">0</span><button onclick="changeScore(7, 13, 1)">+</button></div></div><div class="player" data-player-id="14"><span class="player-name">Alejandro Marcano - Ricardo Calderón</span><div class="score-controls"><button onclick="changeScore(7, 14, -1)">-</button><span class="player-score" id="score-7-14">0</span><button onclick="changeScore(7, 14, 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(7, event)" disabled>Declarar Ganador</button></div><div class="match" data-match-id="8" data-next-match="12" data-next-player-slot="2" onclick="focusMatch(event)"><div class="player" data-player-id="15"><span class="player-name">Isabella Rivas - Anthony Maldonado</span><div class="score-controls"><button onclick="changeScore(8, 15, -1)">-</button><span class="player-score" id="score-8-15">0</span><button onclick="changeScore(8, 15, 1)">+</button></div></div><div class="player" data-player-id="16"><span class="player-name">Gabriel Cedeño - José Pereda</span><div class="score-controls"><button onclick="changeScore(8, 16, -1)">-</button><span class="player-score" id="score-8-16">0</span><button onclick="changeScore(8, 16, 1)">+</button></div></div><button class="winner-button" onclick="declareWinner(8, event)" disabled>Declarar Ganador</button></div></div>
    </div>
    
    <script>
        const WINNING_SCORE = 11;
        const backdrop = document.getElementById('backdrop');

        function focusMatch(event) {
            if (event.target.tagName === 'BUTTON' || event.target.parentElement.classList.contains('score-controls')) {
                event.stopPropagation();
                return;
            }
            const matchElement = event.currentTarget;
            if (matchElement.classList.contains('is-focus-mode')) return;
            unfocusAllMatches();
            matchElement.classList.add('is-focus-mode');
            backdrop.classList.add('active');
        }

        function unfocusAllMatches() {
            document.querySelectorAll('.is-focus-mode').forEach(el => el.classList.remove('is-focus-mode'));
            backdrop.classList.remove('active');
        }
        
        backdrop.addEventListener('click', unfocusAllMatches);

        function changeScore(matchId, playerId, delta) {
            const scoreElement = document.getElementById(`score-${matchId}-${playerId}`);
            let newScore = parseInt(scoreElement.textContent) + delta;
            if (newScore >= 0) scoreElement.textContent = newScore;
            checkWinnerCondition(matchId);
        }

        function checkWinnerCondition(matchId) {
            const matchElement = document.querySelector(`[data-match-id='${matchId}']`);
            const players = matchElement.querySelectorAll('.player');
            const scores = Array.from(players).map(p => parseInt(p.querySelector('.player-score').textContent));
            const winnerButton = matchElement.querySelector('.winner-button');
            const [p1Score, p2Score] = scores;
            
            let hasWinner = (p1Score >= WINNING_SCORE && p1Score >= p2Score + 2) || (p2Score >= WINNING_SCORE && p2Score >= p1Score + 2);
            winnerButton.disabled = !hasWinner;
        }

        function declareWinner(matchId, event) {
            const matchElement = document.querySelector(`[data-match-id='${matchId}']`);
            if (matchElement.classList.contains('match-completed')) return;

            const players = matchElement.querySelectorAll('.player');
            const scores = Array.from(players).map(p => parseInt(p.querySelector('.player-score').textContent));
            
            const winner = scores[0] > scores[1] ? players[0] : players[1];
            const loser = scores[0] > scores[1] ? players[1] : players[0];
            const winnerNameEl = winner.querySelector('.player-name');

            winner.classList.add('bg-green-600/30', 'font-bold');
            winnerNameEl.classList.add('winner-highlight');
            loser.classList.add('bg-red-600/30', 'opacity-60');
            matchElement.classList.add('match-completed');
            
            matchElement.querySelectorAll('button').forEach(btn => btn.disabled = true);
            matchElement.querySelector('.winner-button').textContent = "Finalizado";

            const rect = winnerNameEl.getBoundingClientRect();
            launchFireworks(rect.left + rect.width / 2, rect.top + rect.height / 2);

            const { nextMatch, nextPlayerSlot } = matchElement.dataset;
            if (nextMatch && nextPlayerSlot) {
                const nextPlayerElement = document.querySelector(`[data-match-id='${nextMatch}'] [data-player-id='${nextMatch}-${nextPlayerSlot}'] .player-name`);
                if (nextPlayerElement) nextPlayerElement.textContent = winnerNameEl.textContent;
            }
        }

        const canvas = document.getElementById('fireworks-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let animationFrameId;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        class Particle {
            constructor(x, y, color) {
                this.x = x; this.y = y; this.color = color;
                this.size = Math.random() * 2 + 1; this.alpha = 1;
                this.angle = Math.random() * Math.PI * 2;
                this.speed = Math.random() * 5 + 1; this.gravity = 0.1;
                this.vx = Math.cos(this.angle) * this.speed;
                this.vy = Math.sin(this.angle) * this.speed;
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                this.vy += this.gravity; this.alpha -= 0.02;
            }
            draw() {
                ctx.globalAlpha = this.alpha; ctx.fillStyle = this.color;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
            }
        }

        function createExplosion(x, y) {
            const particleCount = 100;
            const colors = ['#FFC700', '#FF0000', '#FFFFFF', '#00FFC3'];
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle(x, y, colors[Math.floor(Math.random() * colors.length)]));
            }
        }
        
        function animateFireworks() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].draw(); particles[i].update();
                if (particles[i].alpha <= 0) particles.splice(i, 1);
            }
            animationFrameId = requestAnimationFrame(animateFireworks);
            if (particles.length === 0) {
                cancelAnimationFrame(animationFrameId);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        }

        function launchFireworks(x, y) {
            if (animationFrameId) cancelAnimationFrame(animationFrameId);
            particles = [];
            createExplosion(x, y);
            animateFireworks();
        }
    </script>
</body>

</html>
